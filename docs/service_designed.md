## Business Function
### user login service
Users can access the system to receive big airdrop activities

```
GET /user/login?username=xxx&signature=xxx
```

username: Your wallet account address
signature: Signature of the request parameters, generated by the user's private key, the original data of the signature is account address + "login" (eg: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266login)

response: json data and user cookie
```
200 OK
Set-Cookie: knife_cookie=xxx; Expires=xxxx; Path=/; Secure; HttpOnly

{"status": 200, "message": "login success", "data": {"airdrop": "200", "token_name": "Knife", "already_obtaied": "197", "remaining_draw_times": 3, "expire_time": 1728998093}}
```
expire_time: 48 hours later
airdrop: Number of airdrops. eg: 200、500、1000
already_obtaied: Number of airdrops already obtained. eg: 197、490、950
token_name: Token name. eg: Knife、Cake、Sword
remaining_draw_times: Remaining attempts at lottery draw

```
403 Forbidden
{"status": 403, "message": "Contract address is not allowed to participate in activities"}
```
ps: Contract addresses are not allowed to participate in activities

```
401 Unauthorized
{"status": 401, "message": "Invalid username or signature"}
```

### user click draw button
Users can click the draw button to participate in the lottery.

```
GET /user/draw
Cookie: knife_cookie=xxx
```

```
200 OK
{"status": 200, "message": "draw success", "data": {"airdrop": "200", "token_name": "Knife", "already_obtaied": "198.5", "remaining_draw_times": 2, "expire_time": 1728998093}}
```
expire_time: 48 hours later, every lottery will refresh the expiration time

```
401 Unauthorized
{"status": 401, "message": "Invalid cookie"}
```

```
404 Not Found
{"status": 404, "message": "the user airdrop record not found"}
```

```
408 Request Timeout
{"status": 408, "message": "The air drop timeout, please try again"}
```


### get remaining draw times
Users can get the remaining draw times of the user's account.

```
GET /user/remaining_draw_times
Cookie: knife_cookie=xxx
```

response: json data
```
200 OK
{"status": 200, "message": "get remaining draw times success", "data": {"remaining_draw_times": 3}}
```

```
401 Unauthorized
{"status": 401, "message": "Invalid cookie"}
```

```
404 Not Found
{"status": 404, "message": "the user airdrop record not found"}
```

```
408 Request Timeout
{"status": 408, "message": "The air drop timeout, please try again"}
```

### get a link to a friend's assistance
Users can obtain a big airdrop assistance link，

```
GET /user/get_link

Cookie: knife_cookie=xxx
```

response: json data and user cookie
```
200 OK
{"status": 200, "message": "get link success", "data": {"link": "https://domain/user/assist?assisted_username=xxx"}}
```

```
401 Unauthorized
{"status": 401, "message": "Please participate in activities first"}
```
ps: User must participate in activities first

```
408 Request Timeout
{"status": 408, "message": "Activitie timeout, please try again"}
```

### user assist
Users can assist other users to obtain big airdrop. after assist success, the user page will be redirected to the index page to get the big airdrop of him.

```
POST /user/assist?assisted_username=xxx

username=xxx&signature=xxx
```

username: Your wallet account address
signature: Signature of the request parameters, generated by the user's private key, the original data of the signature is account address + "assist" (eg: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266assert)

response: json data and user cookie
```
200 OK
Set-Cookie: knife_cookie=xxx; Expires=xxxx; Path=/; Secure; HttpOnly
{"status": 200, "message": "assist success"}
```

```
401 Unauthorized
{"status": 401, "message": "Invalid username or signature"}
```

```
404 Not Found
{"status": 404, "message": "assisted username not found"}
```

## Other functions
### Calculate the activity level of each user
```
GET /statistics/user_activity?start_time=xxx&end_time=xxx&page_num=xxx&page_size=xxx
```
start_time: Optional parameters
page_size: Within 100, default is 10
end_time: Optional parameters, default is current time
page_num: Optional parameters, default is 1

```
200 OK
{"status": 200, "message": "get user activity success", "data": {"total_count": 100, "page_num": 1, "page_size": 10, "data": [{"user_address": "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266", "activity_time": 1800}, {"user_address": "0x70997970c51812dc3a010c7d01b50e0d17dc79c8", "activity_level": 3600}]}}
```

### Count the users who have successfully obtained airdrops
```
GET /statistics/user_success?start_time=xxx&end_time=xxx&page_num=xxx&page_size=xxx
```
start_time: Optional parameters
page_size: Within 100, default is 10
end_time: Optional parameters, default is current time
page_num: Optional parameters, default is 1

```
200 OK
{"status": 200, "message": "get user activity information success", "data": {"total_count": 100, "page_num": 1, "page_size": 10, "data": [{"user_address": "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266", "already_obtained": 2000}, {"user_address": "0x70997970c51812dc3a010c7d01b50e0d17dc79c8", "already_obtained": 500}]}}
```